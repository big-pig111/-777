<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Keep all script/styles sections same -->
    
    <!-- Change page title -->
    <title>Web3 Game Demo</title>
    
    <!-- Update Chinese font reference (optional) -->
    <style type="text/tailwindcss">
      @layer utilities {
        /* Keep existing styles */
        .gradient-text {
          /* ... */
        }
      }
    </style>
  </head>
  <body>
    <!-- Start Game Overlay -->
    <div id="startOverlay" class="fixed inset-0 z-50 bg-dark/90 backdrop-blur-xl flex items-center justify-center transition-opacity">
      <button id="startGameBtn" class="relative px-8 py-4 rounded-2xl bg-gradient-to-r from-primary to-secondary hover:opacity-90 transition-all transform hover:scale-105">
        <span class="text-2xl font-bold text-gray-900">START GAME</span>
        <div class="absolute inset-0 border-2 border-white/20 rounded-2xl pointer-events-none"></div>
      </button>
    </div>

    <!-- Background Image -->
    <div class="fixed inset-0 z-0">
      <img src="未命名图片 (1).jpg" alt="Game Background" class="w-full h-full object-cover object-center" />
      <div class="absolute inset-0 bg-dark/40"></div>
    </div>

    <!-- Connect Wallet Button -->
    <button id="connectWalletBtn" class="fixed top-6 right-6 z-50 flex items-center space-x-2 bg-dark-light hover:bg-dark-light/80 px-4 py-2 rounded-full border border-white/10 transition-all hover:shadow-lg hover:shadow-primary/20 text-text-light font-medium">
      <i class="fa fa-wallet text-primary"></i>
      <span id="walletStatus">Connect Wallet</span>
    </button>

    <!-- Unity Container -->
    <div id="unity-container" class="unity-desktop">
      <!-- ... keep unity elements unchanged ... -->
      <div id="unity-footer">
        <div id="unity-build-title">Click to fullscreen🔜</div>
        <div id="unity-build-title">Contract Address: <a href="#" target="_blank">0x... (truncated)</a></div>
      </div>
      <div><a href="#" target="_blank">Visit Official Website</a></div>    
    </div>

    <!-- Wallet Modal -->
    <div id="walletModal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
      <div class="relative bg-dark-light rounded-2xl w-full max-w-md border border-white/10 shadow-2xl overflow-hidden transform transition-all duration-300 scale-95 opacity-0" id="modalContent">
        <div class="px-6 py-4 border-b border-white/10 flex items-center justify-between">
          <h3 class="text-xl font-bold">Connect Wallet</h3>
          <!-- Close button -->
        </div>
        <div class="p-6">
          <p class="text-text-light mb-6">Select your wallet provider to connect:</p>
          <!-- Wallet options -->
          <div class="space-y-3">
            <button class="w-full flex items-center justify-between p-4 rounded-xl border border-white/10 hover:border-primary/50 hover:bg-primary/5 transition-all group" id="metaMaskWalletBtn">
              <span class="font-medium">MetaMask</span>
              <i class="fa fa-arrow-right text-text-light"></i>
            </button>
          </div>
          <!-- Terms -->
          <div class="mt-6 p-4 bg-dark rounded-lg border border-white/10 animate-slide-up">
            <p class="text-xs text-text-light">
              <i class="fa fa-info-circle text-primary mr-2"></i>
              By connecting, you agree to our <a href="#" class="text-primary hover:underline">Terms</a> and <a href="#" class="text-primary hover:underline">Privacy Policy</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Connected Wallet Info -->
    <div id="connectedWallet" class="fixed top-16 right-4 z-40 bg-dark-light rounded-xl p-4 border border-white/10 shadow-lg hidden animate-fade-in">
      <div class="flex items-center space-x-3">
        <div>
          <p class="font-medium text-white" id="walletAddress"></p>
          <p class="text-xs text-text-light" id="walletBalance">Loading balance...</p>
        </div>
      </div>
      <button id="disconnectBtn" class="mt-3 w-full px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg transition-colors text-sm">
        Disconnect
      </button>
    </div>

    <script>
      // Global variables
      let web3;
      let accounts;

      // Localized strings
      const localizedAlerts = {
        installMetaMask: 'Please install MetaMask extension',
        switchNetwork: 'Please switch to BSC Mainnet',
        paymentSuccess: 'Payment successful! Loading game...',
        paymentFailed: 'Payment failed: ',
        connectionRejected: 'Connection rejected by user',
        balanceError: 'Failed to get balance'
      };

      async function connectAndPay() {
        try {
          if (!window.ethereum) {
            alert(localizedAlerts.installMetaMask);
            window.open('https://metamask.io/', '_blank');
            return;
          }

          // Request accounts
          accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          web3 = new Web3(window.ethereum);

          // Check network
          const chainId = await web3.eth.getChainId();
          if (chainId !== 56) {
            alert(localizedAlerts.switchNetwork);
            return;
          }

          // Send transaction
          const receipt = await web3.eth.sendTransaction({
            from: accounts[0],
            to: '0xf6c0cd1ce646ad254faea8cba056cd95f503e011',
            value: web3.utils.toWei('0.0001', 'ether'),
            gas: 21000
          });

          if (receipt.status) {
            startOverlay.style.display = 'none';
            updateWalletUI();
            getWalletBalance();
          }
        } catch (error) {
          console.error('Transaction error:', error);
          alert(localizedAlerts.paymentFailed + error.message);
        }
      }

      // Update initialization
      document.addEventListener('DOMContentLoaded', () => {
        startGameBtn.addEventListener('click', () => {
          startGameBtn.innerHTML = `
            <div class="flex items-center space-x-2">
              <div class="animate-spin rounded-full h-5 w-5 border-2 border-t-transparent"></div>
              <span class="text-gray-900">Processing...</span>
            </div>
          `;
          connectAndPay().catch(error => {
            startGameBtn.innerHTML = '<span class="text-gray-900">START GAME</span>';
          });
        });

        // Keep other event listeners
      });

      // Update wallet UI text
      function updateWalletUI() {
        if (accounts && accounts.length > 0) {
          walletStatus.textContent = 'Connected';
          // ... rest of the logic
        } else {
          walletStatus.textContent = 'Connect Wallet';
        }
      }

      // Keep other functions with text replacements
    </script>
  </body>
</html>
